<h1>API Demo</h1>

<p>
  <a class="btn btn-default table_redraw" href="#call">redraw</a>
  <a class="btn btn-default random_row_toggle" href="#call">toggle a random row</a>
</p>
<p><textarea style="width:300px" class="form-control" rows="5" id="console"></textarea></p>

<table style="width:300px" class="table demo table-bordered" data-filter="#filter" data-page-size="5" data-page-previous-text="prev" data-page-next-text="next">
  <thead>
    <tr>
      <th data-toggle="true">Name</th>
      <th>Actions</th>
      <th data-hide="all">DOB</th>
      <th data-hide="all">Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Isidra</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="78025368997">22 Jun 1972</td>
      <td data-value="1"><span class="status-metro status-active" title="Active">Active</span></td>
    </tr>
    <tr>
      <td>Shona</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="370961043292">3 Oct 1981</td>
     <td data-value="2"><span class="status-metro status-disabled" title="Disabled">Disabled</span></td>
    </tr>
    <tr>
      <td>Granville</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="-22133780420">19 Apr 1969</td>
      <td data-value="3"><span class="status-metro status-suspended" title="Suspended">Suspended</span></td>
    </tr>
    <tr>
      <td>Easer</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="250833505574">13 Dec 1977</td>
      <td data-value="1"><span class="status-metro status-active" title="Active">Active</span></td>
    </tr>
    <tr>
      <td>Maple</td>
     <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="694116650726">30 Dec 1991</td>
      <td data-value="3"><span class="status-metro status-suspended" title="Suspended">Suspended</span></td>
    </tr>
    <tr>
      <td>Maxine</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="561440464855">17 Oct 1987</td>
      <td data-value="2"><span class="status-metro status-disabled" title="Disabled">Disabled</span></td>
    </tr>
    <tr>
      <td>Lorraine</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="437400551390">11 Nov 1983</td>
      <td data-value="2"><span class="status-metro status-disabled" title="Disabled">Disabled</span></td>
    </tr>
    <tr>
      <td>Lizzee</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="-257733999319">1 Nov 1961</td>
      <td data-value="3"><span class="status-metro status-suspended" title="Suspended">Suspended</span></td>
    </tr>
    <tr>
      <td>Judi</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="362134712000">23 Jun 1981</td>
      <td data-value="1"><span class="status-metro status-active" title="Active">Active</span></td>
    </tr>
    <tr>
      <td>Lauri</td>
      <td class="row_actions"><a href="#toggle">toggle</a> | <a href="#delete">delete</a></td>
      <td data-value="500874333932">15 Nov 1985</td>
      <td data-value="3"><span class="status-metro status-suspended" title="Suspended">Suspended</span></td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">

$(function () {
    var counter = 0;
    $('table').footable({
        debug: true,
        log: function(message, type) {
            counter++;
            var console = $("#console");
            if (counter > 1) console.append('\n');
            console.append(counter + ': ' + message);
            console[0].scrollTop = console[0].scrollHeight;
        }
    });

    $('.table_redraw').click(function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var footable = $('.footable').data('footable');
        footable.redraw();
    });

    $('.random_row_toggle').click(function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var trigger = $(this).data('trigger');

        var rows = $('table tbody tr:not(".footable-row-detail")');
        var rand = Math.floor(Math.random()*rows.length);
        var random_row = rows[rand];

        var footable = $('.footable').data('footable');
        footable.toggleDetail(random_row);
    });

    $('.row_actions a').click(function(e) {
//        e.preventDefault();
//        e.stopImmediatePropagation();

        //get the FooTable object from the table
        var footable = $(this).parents('table:first').data('footable');

        //get the row we clicked on
        var $row = $(this).parents('tr:first');

        if ($(this).text() == 'delete') {
            if (confirm('are you sure?')) {
                footable.removeRow($row);
            }
        } else {
            footable.toggleDetail($row);
        }
        return false;
    });
});

</script>
