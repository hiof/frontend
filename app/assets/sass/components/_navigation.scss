
/*
### Component: Navigation


-

*/

$grid-float-breakpoint: 955px;

@import "../../../../vendor/bootstrap-sass/assets/stylesheets/bootstrap/_navs";



@import "../../../../vendor/bootstrap-sass/assets/stylesheets/bootstrap/_navbar";


$cubic: cubic-bezier(0.4, 0.01, 0.165, 0.99);
$menuItems: 4;

#global-search{
  //display: none;
}
.navbar{
  min-height: auto;
  height: 4.4rem;
  margin: 0 ;
  .container-fluid{
    max-width: 104rem;
    margin: 0 auto;
  }
}
.navbar-default{
  background: rgba(#fff, .9);
}
.navbar-header,
.navbar-collapse{
  margin: 0 !important;
  position: relative;
  padding: 0;
  max-height: none !important;
}
.navbar-header{
  height: 4.4rem;
}
.navbar-nav>li{
  &>a{
    padding-top: 11px !important;
    padding-bottom: 12px !important;

    // Hacks for inline buttons in the header if that functionality is turned on.
    &.btn{
      padding-top: 6px!important;
      padding-bottom: 6px!important;
      margin-top: 4px;
      margin-right: 5px;
      color: #fff;
      font-weight: 300;
      font-size: 1.4rem;
      &.btn-line{
        color: $btn-primary-bg;
        &:hover{
          color: $white;
        }
      }
    }
  }
}
.nav-icon{
  display: inline-block;
  width: 2rem;
  height: 1.4rem;
  //background: pink;
  position: relative;
  .nav-icon-line{
    height: 1px;
    width: 1.4rem;
    position: absolute;
    top: 0.7rem;
    left: .2rem;
    background: #000;
    transition: all .5s ease;
    &:nth-child(odd){
      //top: 1.4rem;
      transform: translateY(-.2rem);
    }
    &:nth-child(even){
      //top: 1.4rem;
      transform: translateY(.2rem);
    }
  }
}
.navbar-toggle.active{
  .nav-icon{
    .nav-icon-line{
      &:nth-child(odd){
        transform:rotate(-45deg);
      }
      &:nth-child(even){
        transform: rotate(45deg);
      }
    }
  }
}
.navbar-nav{
  //background: #fff;
  margin: 0;
  a{
    font-size: 1.4rem;
    //&:hover{
    //  background-color: $btn-primary-bg !important;
    //  color: $white !important;
    //}
  }
}
.nav{
  li{
    margin-left: 0;
  }
}
.navbar-brand{
  svg{
    g {
      transition: fill .4s ease;
      fill: #000;
    }
  }
}
#nav-internal > li > a{
  @extend .btn-line;
}
.navbar-toggle{
  float:none;
  margin: 0;
  margin-top: .8rem;
  border: 1px solid #eee;
  padding: 4px 10px;
  margin-left: .8rem;
  //background: pink;
  &.float-right{
    float: right;
    position: absolute;
    top: 0;
    right: 1rem;
    margin-left: 0;
  }
  .helper-text{
    float: right;
    line-height: 1.6rem;
    //padding-left: .5rem;
  }
  //.icon-bar{
  //  display: block;
  //  width: 22px;
  //  height: 2px;
  //  background-color: #cccccc;
  //  border-radius: 1px;
  //}
  svg{
    width: 1.6rem;
    height: 1.6rem;
  }
}



.dropdown-menu-item{
  &> a{
    padding-right: 2rem !important;
    svg{
      content: "";
      display: block;
      width: 1.6rem;
      height: 1.6rem;
      position: absolute;
      top: .6rem;
      right: 0;
    }
  }
  //&:hover svg{
  //  fill: $white;
  //}
}
.navbar-nav{
  &>.dropdown-menu-item{
    &>a{
      padding-right: 2.2rem !important;
      &>svg{
        transition: transform .2s;
        //transform: rotate(90deg);
        top: .9rem;
        right: .4rem;
        path{
          fill: $white;
        }
      }
    }
    &:hover{
      &>a>svg{
        transform: rotate(90deg);
      }
    }
  }
}

// Logo

@include mq($until: small) {
  #logo-hiof{
    padding: 0;
    position: absolute;
    top: 0;
    left: 50%;
    margin-left: -8.8rem;
    padding-top: 6px;
  }
}

@include mq($until: 350px) {
  #logo-hiof{
    padding: 0;
    position: absolute;
    width: 4.4rem;
    height: 4.4rem;
    overflow-x: hidden;
    top: 0;
    left: 50%;
    margin-left: -2.2rem;
    padding-top: 6px;
    svg{
      .text{
        display: none;
      }
    }
  }
}
@include mq($from: small, $until: large) {
  #logo-hiof{
    padding: 0;
    position: absolute;
    top: 0;
    left: 50%;
    margin-left: -8.8rem;
    padding-top: 6px;
  }
}

@include mq($from: large) {
  #logo-hiof{
    position: absolute;
    left: 43rem;
    top: 0;
    float: none;
    padding: 0;
    padding-top: 8px;
    margin-left: 0;
  }
}


@include mq($until: 955px) {

  #global-search{
    display: none;
  }

  .navbar-nav-wrapper{
    max-height: 0px;
    overflow: hidden;
    transition: all 0.5s ease-out, background 1s ease-out;
    transition-delay: 0.2s;
    z-index: 1;
  }

  .navbar-nav{
    background: $white;
    &>li{
      width: 100%;
      float: left;
      //border-bottom: 1px solid #333;
      opacity: 0;
      transform: scale(1.15) translateY(-30px) translateX(30px);
      transition: transform 0.5s $cubic, opacity 0.6s $cubic;
      @for $i from 1 through $menuItems {
        &:nth-child(#{$i}) {
          transition-delay: #{0.56 - ($i * 0.07)}s;
        }
      }
      &>a{

        line-height: 3rem;
      }
    }
  }
  .navbar-nav-wrapper.open{

    max-height: 100vh;
    background-color: #000;
    transition: all 0.3s ease-in, background 0.5s ease-in;
    transition-delay: 0.25s;
    overflow-y:auto;
    .navbar-nav{
      &>li{
        transform: scale(1) translateY(0px) translateX(0px);
        opacity: 1;
        @for $i from 1 through $menuItems {
          &:nth-child(#{$i}) {
            transition-delay: #{0.07 * $i+0.2}s;
          }
        }
      }
    }
  }
  .dropdown-menu{
    position: relative;
    top: auto;
    left: auto;
    width: 100%;
    min-width: inherit;
    box-shadow: none;
    border: 0;
    //background: #efefef;
    padding-bottom: 0;

    li{
      a{
        position: relative;
        line-height: 3rem;
        padding-left: 3rem;
        color: $color-primary-action;
      }
      border-top: .1rem #eee solid;
    }
    .dropdown-menu{
      margin: 0;
      li{
        padding-left: 3rem;
      }
    }
  }

  .navbar-nav{
    &>.dropdown-menu-item{
      &>a{
        &>svg{
          path{
            fill: $color-primary-action;
          }
        }
      }
    }
  }

}


@include mq($from: 955px) {
  #nav-page{
    width: 100%;
    float: left;
  }
  #global-search-input {
    position: absolute;
    right: 5rem;
    width: 32.5rem;
    top: 0rem;
    opacity: 1;
    transition: width .3s ease;
    border-top-left-radius: $border-radius-standard;
    border-bottom-left-radius: $border-radius-standard;
  }
  #global-search {
    width: 5rem;
    padding: 0;
    margin: 0;
    height: 3.6rem;
    position: relative;
    margin-top: .4rem;
    margin-left: .5rem;
    .btn {
      z-index: 99;
      height: 3.4rem;
      &:hover {
        background-color: $btn-primary-bg;
      }
    }
    #search-close {
      position: absolute;
      right: 6rem;
      top: .9rem;
      z-index: 9;
      width: 1.6rem;
      height: 1.6rem;
      background: url(../images/icons/cross.svg) no-repeat;
      background-size: 100% 100%;
      transition: opacity .3s ease;
      opacity: 1;
      display: block;
      border: 0;
      padding: 0;
    }
    &.initial {
      #global-search-input {
        opacity: 0;
        width: 0;
        padding: 0;
        border: none;
      }
      #search-close {
        right: 1rem;
        opacity: 0;
        display: none;
      }
      #search {
        border-top-left-radius: $border-radius-standard;
        border-bottom-left-radius: $border-radius-standard;
      }
    }
  }


  #header-navigation-left{
    float: left;
    padding: 0;
  }
  #header-navigation-right{
    float: right;
    padding: 0;
  }
  #nav-pages,
  #nav-internal{
    &> li{
      position: relative;
      //margin-right: 2rem;
      & > a,
      .btn-link{
        //padding: 1rem .7rem 0;
        //border-bottom: 1px solid $color-primary-action;
        //margin-bottom: 1.2rem;
        position: relative;
        //&:before{
        //  content: "";
        //  background-color: $color-primary-action;
        //  position: absolute;
        //  top: 0rem;
        //  left: 0;
        //  width: 100%;
        //  display: block;
        //  height: .1rem;
        //  transition: all .3s;
        //  transform: scaleX(.8) translateY(3rem) ;
        //  z-index: -1;
        //}
      }
      & > .dropdown-menu{
        display: block;
        max-height: 0;
        padding: 0;
        overflow: hidden;
        border: 0;
        transition: all .3s;
        //transition-delay: .3s;
      }

      &:hover{
        //background-color: $color-primary-action;

        &> a{
          color: #fff;
          background: $color-primary-action;
          //&:before{
          //  height: 4.4rem;
          //  transform: scaleX(1) translateY(0rem) ;
          //}
        }
        & > .dropdown-menu{
          li{
            position: relative;
            &.active{
              a{
                color: #fff;
                background: $color-primary-action !important;
              }
            }
            a{
              position: relative;
              background: transparent;
              &:before{

                content: "";
                background-color: $color-primary-action;
                position: absolute;
                top: -.2rem;
                left: 0;
                width: 100%;
                display: block;
                height: 106%;
                //transition: transform .1s;
                transform: scaleX(0);
                transform-origin: top left;
                z-index: -1;

              }
              &:hover{
                background: transparent;
                color: $white;
                border-bottom-left-radius: $border-radius-standard;
                border-bottom-right-radius: $border-radius-standard;
                &:before{
                  transform: scaleX(1);
                }
              }
            }

          }
        }
      }
      // Activate subnavigation on hover/focus
      &:hover{
        & > .dropdown-menu{
          max-height: 60rem;
          padding: .5rem 0;
          border: .1rem solid rgba(0,0,0,.15);
          overflow: visible;
          padding-bottom: 0;
          li{
            &:last-child{
              border-bottom-left-radius: $border-radius-standard;
              border-bottom-right-radius: $border-radius-standard;
            }
            &:hover{
              & > .dropdown-menu{
                display: block;
                top: -5px;
                left: 100%;
                border-left: 1px fade(#000, 5%) solid;
                z-index: 3;
              }
            }
          }
        }
      }
    }
  }

}
